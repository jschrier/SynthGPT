(* Content-type: application/vnd.wolfram.mathematica *)

(*** Wolfram Notebook File ***)
(* http://www.wolfram.com/nb *)

(* CreatedBy='Mathematica 14.0' *)

(*CacheID: 234*)
(* Internal cache information:
NotebookFileLineBreakTest
NotebookFileLineBreakTest
NotebookDataPosition[       158,          7]
NotebookDataLength[      5365,        147]
NotebookOptionsPosition[      4606,        127]
NotebookOutlinePosition[      5003,        143]
CellTagsIndexPosition[      4960,        140]
WindowFrame->Normal*)

(* Beginning of Notebook Content *)
Notebook[{
Cell[BoxData[{
 RowBox[{
  RowBox[{"SetDirectory", "@", 
   RowBox[{"NotebookDirectory", "[", "]"}]}], ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"<<", "\"\<./src/statistical_baseline.wl\>\""}], 
  "\[IndentingNewLine]"}], "\[IndentingNewLine]"}], "Input",
 CellChangeTimes->{{3.91999525051749*^9, 3.919995483771969*^9}, {
   3.9199958415727167`*^9, 3.919995934081818*^9}, {3.91999678475522*^9, 
   3.919996792807456*^9}, {3.919997033096957*^9, 3.919997033912846*^9}, {
   3.919997787044758*^9, 3.919997827610414*^9}, 
   3.919997875919384*^9},ExpressionUUID->"aa505d83-156d-4381-b52f-\
d48369a42fe1"],

Cell[BoxData[
 RowBox[{
  RowBox[{"(*", " ", 
   RowBox[{
   "setup", " ", "calculation", " ", "by", " ", "defining", " ", "possible", 
    " ", "precursors", " ", "and", " ", "targets"}], " ", "*)"}], 
  "\[IndentingNewLine]", 
  RowBox[{
   RowBox[{
    RowBox[{"precursors", " ", "=", " ", 
     RowBox[{"Import", "[", 
      RowBox[{"\"\<./data/precursors.json\>\"", ",", "\"\<RawJSON\>\""}], 
      "]"}]}], ";"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"targetElements", "=", 
     RowBox[{"sourceElementsInTargets", "@", " ", 
      RowBox[{"Import", "[", 
       RowBox[{"\"\<./data/targets.json\>\"", ",", "\"\<RawJSON\>\""}], 
       "]"}]}]}], ";"}], "\[IndentingNewLine]", "\[IndentingNewLine]", 
   RowBox[{"(*", " ", 
    RowBox[{
    "compute", " ", "categorical", " ", "distribution", " ", "of", " ", 
     "precursors", " ", "for", " ", "each", " ", "source", " ", "element"}], 
    " ", "*)"}], "\[IndentingNewLine]", 
   RowBox[{
    RowBox[{"weights", "=", 
     RowBox[{"AssociationMap", "[", " ", "\[IndentingNewLine]", 
      RowBox[{
       RowBox[{"elementDistribution", "[", "allowedPrecursors", "]"}], ",", 
       " ", "\[IndentingNewLine]", "targetElements"}], "]"}]}], 
    ";"}]}]}]], "Input",
 CellChangeTimes->{{3.919996604535424*^9, 3.919996685933902*^9}, {
  3.919996732112012*^9, 3.91999673664845*^9}, {3.9199972169769583`*^9, 
  3.919997234551836*^9}, {3.91999783486899*^9, 
  3.919997899486341*^9}},ExpressionUUID->"61af898e-42bf-4ac8-ab9a-\
0a70a2ad956a"],

Cell[CellGroupData[{

Cell[BoxData[{
 RowBox[{
  RowBox[{
   RowBox[{
    RowBox[{"{", 
     RowBox[{"train", ",", "test"}], "}"}], "=", 
    RowBox[{"Values", "@", 
     RowBox[{"Import", "[", "\"\<./data/cv_random1.json\>\"", "]"}]}]}], 
   ";"}], "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"baselineTop1", "=", 
   RowBox[{"ParallelMap", "[", 
    RowBox[{
     RowBox[{"evaluateBaselinePrediction", "[", 
      RowBox[{"weights", ",", "1"}], "]"}], ",", "test"}], "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"N", "@", 
   RowBox[{"Mean", "@", 
    RowBox[{"Boole", "@", 
     RowBox[{
      RowBox[{"Lookup", "[", "\"\<correct\>\"", "]"}], "@", "%"}]}]}]}], 
  "\[IndentingNewLine]"}], "\[IndentingNewLine]", 
 RowBox[{
  RowBox[{"baselineTop5", "=", 
   RowBox[{"ParallelMap", "[", 
    RowBox[{
     RowBox[{"evaluateBaselinePrediction", "[", 
      RowBox[{"weights", ",", "5"}], "]"}], ",", "test"}], "]"}]}], 
  ";"}], "\[IndentingNewLine]", 
 RowBox[{"N", "@", 
  RowBox[{"Mean", "@", 
   RowBox[{"Boole", "@", 
    RowBox[{
     RowBox[{"Lookup", "[", "\"\<correct\>\"", "]"}], "@", 
     "%"}]}]}]}]}], "Input",
 CellChangeTimes->{{3.91999675077382*^9, 3.9199967601091213`*^9}, {
   3.919996880390395*^9, 3.9199969017050247`*^9}, {3.9199970611651583`*^9, 
   3.919997108110259*^9}, 3.919997240049981*^9, {3.919997778561222*^9, 
   3.919997782443029*^9}, {3.919997856776499*^9, 
   3.919997865739744*^9}},ExpressionUUID->"f1ffa91a-ff04-446d-9529-\
4543bcdf29f2"],

Cell[BoxData["0.3456614509246088`"], "Output",
 CellChangeTimes->{3.919996909076086*^9, 3.9199971246326113`*^9},
 CellLabel->
  "Out[1507]=",ExpressionUUID->"aa29ede3-c4ea-4815-a25f-e98928e71f30"],

Cell[BoxData["0.5509720246562352`"], "Output",
 CellChangeTimes->{3.919996909076086*^9, 3.919997129079875*^9},
 CellLabel->
  "Out[1509]=",ExpressionUUID->"41e4208d-8386-4a69-83a9-b88564c4fe20"]
}, Open  ]]
},
WindowSize->{808, 747},
WindowMargins->{{Automatic, 47}, {-8, Automatic}},
FrontEndVersion->"14.0 for Mac OS X x86 (64-bit) (December 12, 2023)",
StyleDefinitions->"Default.nb",
ExpressionUUID->"3ef5879d-7d42-45c0-affd-73b2d0456c68"
]
(* End of Notebook Content *)

(* Internal cache information *)
(*CellTagsOutline
CellTagsIndex->{}
*)
(*CellTagsIndex
CellTagsIndex->{}
*)
(*NotebookFileOutline
Notebook[{
Cell[558, 20, 609, 12, 94, "Input",ExpressionUUID->"aa505d83-156d-4381-b52f-d48369a42fe1"],
Cell[1170, 34, 1503, 35, 178, "Input",ExpressionUUID->"61af898e-42bf-4ac8-ab9a-0a70a2ad956a"],
Cell[CellGroupData[{
Cell[2698, 73, 1496, 41, 157, "Input",ExpressionUUID->"f1ffa91a-ff04-446d-9529-4543bcdf29f2"],
Cell[4197, 116, 196, 3, 48, "Output",ExpressionUUID->"aa29ede3-c4ea-4815-a25f-e98928e71f30"],
Cell[4396, 121, 194, 3, 48, "Output",ExpressionUUID->"41e4208d-8386-4a69-83a9-b88564c4fe20"]
}, Open  ]]
}
]
*)

